"use strict";(self["webpackChunkvue3_week6"]=self["webpackChunkvue3_week6"]||[]).push([[388],{8388:function(e,a,s){s.r(a),s.d(a,{default:function(){return $}});var t=s(6252);const n={class:"navbar navbar-expand-lg navbar-dark bg-dark"},o={class:"container-fluid"},i=(0,t._)("h1",{class:"navbar-brand m-0"},"肉鬆電器行後台",-1),c=(0,t._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,t._)("span",{class:"navbar-toggler-icon"})],-1),r={class:"collapse navbar-collapse",id:"navbarNav"},l={class:"navbar-nav"},u={class:"nav-item"},h=(0,t.Uk)("回到前台"),v={class:"nav-item"},k=(0,t.Uk)("產品列表"),d={class:"nav-item"},p=(0,t.Uk)("登出");function g(e,a,s,g,b,m){const f=(0,t.up)("router-link"),_=(0,t.up)("router-view");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("nav",n,[(0,t._)("div",o,[i,c,(0,t._)("div",r,[(0,t._)("ul",l,[(0,t._)("li",u,[(0,t.Wm)(f,{class:"nav-link",to:"/"},{default:(0,t.w5)((()=>[h])),_:1})]),(0,t._)("li",v,[(0,t.Wm)(f,{class:"nav-link",to:"/admin/products"},{default:(0,t.w5)((()=>[k])),_:1})]),(0,t._)("li",d,[(0,t.Wm)(f,{class:"nav-link",to:"/login",onClick:m.singout},{default:(0,t.w5)((()=>[p])),_:1},8,["onClick"])])])])])]),b.checkSuccess?((0,t.wg)(),(0,t.j4)(_,{key:0})):(0,t.kq)("",!0)],64)}var b=s(6455),m=s.n(b),f={data(){return{checkSuccess:!1}},methods:{checkLogin(){const e=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");if(e){this.$http.defaults.headers.common.Authorization=`${e}`;const a="https://vue3-course-api.hexschool.io/v2/api/user/check";this.$http.post(a,{api_token:this.token}).then((()=>{this.checkSuccess=!0})).catch((e=>{console.log(e.response.data.message),this.$router.push("/login")}))}else m().fire({position:"center",icon:"error",title:"請先登入!",showConfirmButton:!1,timer:1500}),this.$router.push("/login")},singout(){document.cookie="hexToken=;expires=;",m().fire({position:"center",icon:"success",title:"已登出!",showConfirmButton:!1,timer:1500}),this.$router.push("/login")}},mounted(){this.checkLogin()}},_=s(3744);const w=(0,_.Z)(f,[["render",g]]);var $=w}}]);
//# sourceMappingURL=388.98e64556.js.map